<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  
    <!-- 타임 리프 문법 정리
      th:text : 컨트롤러에서 받아온 객체의 멤버변수 값을 출력(텍스트로)
      th:utext: HTML 태그 해석 출력 (보안에는 주의해야함.) 사용방식은 th:text와 동일
      th:value: 입력 필드값 설정. (입력 필드의 기본 값)   
    -->
  <p th:text="${message}">  </p>
  <p th:text="${객체명.변수명}">  </p>

  <input type="text" th:value="${user.name}" name="username">
  <textarea th:value="${post.content}" name="content"></textarea>
    <!-- 리소스 경로 설정.
    th:src  : 이미지등 미디어 파일 경로 설정
    th:href : URL 설정시 사용    
    
    타임리프의 표현식 5가지
    1. ${} : 변수 표현식 (타임리프 문법의 변수 선언)
      -> 컨트롤러에서 넘어온 모든 데이터에 접근이 가능.
    2. *{} : 선택변수 표현식 (전제 조건 객체 내부에서 사용.)
      
      <p th:text="${user.name}">이름</p>
      <p th:text="${user.age}">나이</p>
      <p th:text="${user.email}">이메일</p>
      
      - 위 아래 코드는 동일한 결과를 출력. -

      <div th:object="${user}">
          <p th:text="*{name}">이름</p>  <${user.name}과 동일 
          <p th:text="*{age}">나이</p>    ${user.age}와 동일 
          <p th:text="*{email}">이메일</p>  ${user.email}과 동일 
      </div>
    -->

  <img th:src="@{/images/profile/${user.profileImage}}" alt="프로필 이미지">
  <a th:href="@{/users/{id}/profile(id=${user.id})}">프로필 보기</a>
    <!-- 3. #{...} : 메세지 표현식
            # : 날짜를 표현할때도 자주 사용 -->
  <p th:text = "#{w.msg}">메세지</p>

      <!-- 
        @{...} : 링크 표현식      
        위의 프로필보기 참조.
      -->

      <!-- 
        표현식도 표현식이지만 중요한건 제어문.
        
        if, unless, switch-case, each, with
        
      -->
      
      <!-- 타임리프 if 예시 -->
      <div th:if = "${user.role == 'admin'}">
        <a th:href="@{/admin/dashboard}">관리자 대시보드</a>
      </div>
      
      <div th:unless="${user != null}">
        <a th:href="@{/login}">로그인</a>
      </div>

      switch-case
      <div th:switch="${user.membershipLevel}">
          <p th:case="'BRONZE'">브론즈 회원입니다</p>
          <p th:case="'SILVER'">실버 회원입니다</p>
          <p th:case="'GOLD'">골드 회원입니다</p>
          <p th:case="'PLATINUM'">플래티넘 회원입니다</p>
          <p th:case="*">일반 회원입니다</p>
      </div>

      each : 향상된 for문 쓴다 생각하고 접근.
       -> 주로 컨트롤러에서 리턴된 리스트들을 변환할때 사용.
      <tr th:each="user: ${userList}">
        <td th:text="${user.id}"></td>
      </tr>

      each + if 활용사례
      -> each의 경우는 2개의 임시변수들이 올때도 있음.
         2번째는 반복의 상태를 나타내는 변수 값.
      -> userStat : 반복상태 제공 객체.
         userStat.count : 현재 반복의 순번.
         userStat.first : 현재 항목이 첫번째 인가?
         userStat.last  : 현재 항목이 마지막 인가?
         userStat.even  : 현재 항목이 짝수번째 인가?
         userStat.odd   : 현재 항목이 홀수번째 인가?
    <tr th:each="user, userStat : ${userList}">
        <td th:text="${userStat.count}">순번</td>
        <td th:text="${user.name}">이름</td>
        <td>
            <span th:if="${userStat.first}" style="color: blue;">첫 번째</span>
            <span th:if="${userStat.last}" style="color: red;">마지막</span>
            <span th:if="${userStat.even}" style="color: green;">짝수 행</span>
            <span th:if="${userStat.odd}" style="color: orange;">홀수 행</span>
        </td>
    </tr>
      
</body>
</html>